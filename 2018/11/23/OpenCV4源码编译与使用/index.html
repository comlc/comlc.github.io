<!DOCTYPE html><html><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="OpenCV4源码编译与使用"><meta name="keywords" content="OpenCV"><meta name="author" content="comlc,undefined"><meta name="copyright" content="comlc"><title>OpenCV4源码编译与使用 | COMLCのBlog</title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css?version=1.5.3"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?https://hm.baidu.com/hm.js?66f25c24596db799ce091d9b434b9495";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  localSearch: {"labels":{"input_placeholder":"Search for Posts","hits_empty":"我们没有找到任何搜索结果: ${query}"},"path":"search.xml"}
} </script></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#简介"><span class="toc-number">1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#功能模块"><span class="toc-number">2.</span> <span class="toc-text">功能模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#源码下载"><span class="toc-number">3.</span> <span class="toc-text">源码下载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CMake-VS2017编译"><span class="toc-number">4.</span> <span class="toc-text">CMake+VS2017编译</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux编译"><span class="toc-number">5.</span> <span class="toc-text">Linux编译</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">comlc</div><div class="author-info__description text-center">九山八海，为一世界，聚千界则成小千世界，此界乘三，无我不断者</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives/"><span class="pull-left">文章</span><span class="pull-right">11</span></a><a class="author-info-articles__tags article-meta" href="/tags/"><span class="pull-left">标签</span><span class="pull-right">22</span></a><a class="author-info-articles__categories article-meta" href="/categories/"><span class="pull-left">分类</span><span class="pull-right">14</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">友情链接</div><a class="author-info-links__name text-center" href="https://github.com/comlc" target="_blank">Comlc</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/background/bg-1.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">COMLCのBlog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">主页</a><a class="site-page" href="/archives/">归档</a><a class="site-page" href="/categories/">分类</a><a class="site-page" href="/tags/">标签</a><a class="site-page" href="/about/">关于我</a></span></div><div id="post-info"><div id="post-title">OpenCV4源码编译与使用</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-11-23</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/其他/">其他</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/其他/开发环境/">开发环境</a><span class="post-meta__separator">|</span><i class="fa fa-comment-o post-meta__icon" aria-hidden="true"></i><a href="/2018/11/23/OpenCV4源码编译与使用/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="2018/11/23/OpenCV4源码编译与使用/"></span></a><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">1,929</span><span class="post-meta__separator">|</span><span>阅读时长: 8 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div id="post-content"><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><blockquote>
<p>OpenCV是一个基于BSD许可（开源）发行的跨平台计算机视觉库，可以运行在Linux、Windows、Android和Mac操作系统上。它轻量级而且高效——由一系列 C 函数和少量 C++ 类构成，同时提供了Python、Ruby、MATLAB等语言的接口，实现了图像处理和计算机视觉方面的很多通用算法。</p>
</blockquote>
<a id="more"></a>
<h2 id="功能模块"><a href="#功能模块" class="headerlink" title="功能模块"></a>功能模块</h2><table>
<thead>
<tr>
<th style="text-align:center">模块</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Core</td>
<td>核心功能模块，包括基本数据结构、基本绘图功能、辅助功能和系统函数、与OpenGL的互操作等</td>
</tr>
<tr>
<td style="text-align:center">Imgproc</td>
<td>图像处理模块，包括线性和非线性的图像滤波、图像的几何变换、图像转换、直方图相关、结构分析和形状描述、运动分析和对象跟踪、特征检测、目标检测等</td>
</tr>
<tr>
<td style="text-align:center">Highgui</td>
<td>高级图形用户界面，可以用来显示图像或者简单的输入的用户交互函数，这可以看作是一个非常轻量级的Windows UI工具包。</td>
</tr>
<tr>
<td style="text-align:center">Features2D</td>
<td>2D功能模块，包括特征检测和描述、特征匹配、关键点绘制、匹配功能绘制等</td>
</tr>
<tr>
<td style="text-align:center">ML</td>
<td>机器学习模块，主要是统计模型和分类算法，包括决策树、支持向量机、神经网络等</td>
</tr>
<tr>
<td style="text-align:center">Flann</td>
<td>高维的近似近邻快速搜索算法库，包括快速近似最近邻搜索、聚类</td>
</tr>
<tr>
<td style="text-align:center">Objdectect</td>
<td>目标检测模块，使用Cascade Classification（级联分类）和Latent SVM进行检测特定目标，比如人脸或者行人的算法，也可以训练检测器并用来检测其他物体。</td>
</tr>
<tr>
<td style="text-align:center">Contrib</td>
<td>在 OpenCV3.0后，融合进了opencv_contrib</td>
</tr>
<tr>
<td style="text-align:center">Calib3d</td>
<td>主要是相机校准和三维重建相关的内容，包括包括校准单个、双目以及多个相机的算法实现</td>
</tr>
<tr>
<td style="text-align:center">Photo</td>
<td>包括图像修复、图像去噪</td>
</tr>
<tr>
<td style="text-align:center">Video</td>
<td>视频分析模块，包括运动估计、背景分离、对象跟踪等视频处理相关内容</td>
</tr>
<tr>
<td style="text-align:center">Stitching</td>
<td>图像拼接模块，包括特点寻找和匹配图像、图片歪斜、曝光补偿、图片混合、自动校准等</td>
</tr>
<tr>
<td style="text-align:center">Shape</td>
<td>形状的匹配以及距离计算</td>
</tr>
<tr>
<td style="text-align:center">GPU</td>
<td>运用GPU加速的计算机视觉模块</td>
</tr>
<tr>
<td style="text-align:center">Ocl</td>
<td>运用OpenCL加速的计算机视觉组件模块</td>
</tr>
<tr>
<td style="text-align:center">Nonfree</td>
<td>包含一些受到专利保护的或者受到使用限制的（比如SIFT算法）算法</td>
</tr>
</tbody>
</table>
<h2 id="源码下载"><a href="#源码下载" class="headerlink" title="源码下载"></a>源码下载</h2><ol>
<li>下载<a href="https://opencv.org/releases.html" target="_blank" rel="noopener">opencv-4.0.1.zip</a>源码</li>
<li>下载<a href="https://github.com/opencv/opencv_contrib/releases" target="_blank" rel="noopener">opencv_contrib-4.0.1.zip</a>源码，注意版本要一致。</li>
<li>在<code>D:\BeawanDevelop\VSworkspace\OpenCV</code>下创建<code>source</code>、<code>build-win</code>、<code>build-linux</code>，将opencv和opencv_contrib的源码解压放到<code>source</code>目录下。</li>
</ol>
<h2 id="CMake-VS2017编译"><a href="#CMake-VS2017编译" class="headerlink" title="CMake+VS2017编译"></a>CMake+VS2017编译</h2><ol>
<li>利用CMake生成VS2017项目，打开CMake选择源码所在路径和编译输出的路径，然后点击<code>Configure</code>选择<code>Visual Studio 15 2017 Win64</code>生成器，如下图：<br><img src="/2018/11/23/OpenCV4源码编译与使用/../../../../img/opencv/win-cmake1.png" alt="CMake编译步骤一"></li>
<li>由于我要生成静态库，所以需取消<code>BUILD_SHARED_LIBS</code>勾选，并且还要设置<code>OPENCV_EXTRA_MODULES_PATH</code>路径，以将opencv_contrib作为模块一起编译。这里还需要注意<code>OPENCV_ENABLE_NONFREE</code>设置，需将其勾选(这是由于SURF和SIFT属于收费模块，若后续想要使用却没有定义OPENCV_ENABLE_NONFREE，则会抛异常不能使用，反正可以编译正常使用)，最后再次点击<code>Configure</code>，如下图：<br><img src="/2018/11/23/OpenCV4源码编译与使用/../../../../img/opencv/win-cmake2.png" alt="CMake编译步骤二"></li>
<li>待编译完成后，点击<code>Generate</code>生成VS2017项目，再点击<code>Open Project</code>打开项目。</li>
<li>在VS2017中点击<code>生成-&gt;批生成</code>，选中<code>INSTALL</code>两项，然后开始生成，需等待一些时间，如下图：<br><img src="/2018/11/23/OpenCV4源码编译与使用/../../../../img/opencv/win-vs.png" alt="VS2017编译静态库"></li>
<li>待VS编译完后，会在工程目录下看到<code>install</code>目录，里面包括了调用OpenCV需要用到的include文件和静态库文件(有Debug和Release版本)</li>
<li>在VS2017上新建Windows控制台应用程序项目，配置头文件的附加包含目录、静态库的附加库目录、附加依赖项，编写程序测试OpenCV静态库。若想生成的可执行文件在没有OpenCV的环境下也可以运行，需要设置<code>配置属性-&gt;C/C++-&gt;代码生成</code>，将运行库改成<code>多线程调试(/MTD)</code>或<code>多线程(MT)</code>。</li>
</ol>
<h2 id="Linux编译"><a href="#Linux编译" class="headerlink" title="Linux编译"></a>Linux编译</h2><ol>
<li>这里我使用的是Win10子系统Ubuntu，先安装依赖库，执行<code>sudo apt-get install build-essential pkg-config ccache libgtk2.0-dev libavcodec-dev libavformat-dev libjpeg.dev libtiff5.dev libswscale-dev libjasper-dev gtk+-3.0 libdc1394-22-dev libgstreamer1.0-dev libgstreamer-plugins-base1.0-dev libavresample-dev</code>，安装依赖库前可以选择性的将软件源更新下，各依赖包若有新版本可以通过<code>apt-cache search</code>查看。</li>
<li>若碰到<code>libjasper-dev</code>库无法安装，可以依次执行<br><code>sudo add-apt-repository &quot;deb http://security.ubuntu.com/ubuntu xenial-security main&quot;</code><br><code>sudo apt update</code>更新软件源。</li>
<li>在Ubuntu上安装<code>xterm</code>并开启SSH服务，然后在用<code>Xstart</code>连接Ubuntu，执行<code>cmake-gui</code>可以打开CMake图形化界面。</li>
<li>同样需要配置源码路径以及编译输出路径，然后点击<code>Configure</code>选择<code>Unix Makefiles</code>生成器，如下图：<br><img src="/2018/11/23/OpenCV4源码编译与使用/../../../../img/opencv/linux-cmake1.png" alt="CMake编译步骤一"></li>
<li>取消勾选<code>BUILD_SHARED_LIBS</code>，设置<code>OPENCV_EXTRA_MODULES_PATH</code>路径，勾选<code>OPENCV_ENABLE_NONFREE</code>、<code>BUILD_JASPER</code>、<code>BUILD_JPEG</code>、<code>BUILD_PNG</code>、<code>BUILD_TIFF</code>、<code>BUILD_WEBP</code>、<code>BUILD_ZLIB</code>，再次点击<code>Configure</code>。</li>
<li>待编译完成后，点击<code>Generate</code>生成Makefile，将目录切换至<code>build-linux</code>下，执行<code>make</code>命令开始编译静态库，如下图：<br><img src="/2018/11/23/OpenCV4源码编译与使用/../../../../img/opencv/linux-make2.png" alt="make编译"></li>
<li>执行<code>make install</code>命令，会将OpenCV安装到<code>/usr/local</code>目录下，执行<code>opencv_version</code>命令可以看到版本为4.0.1。include头文件在<code>/usr/local/include/opencv4</code>目录下，静态库文件在<code>/usr/local/lib</code>目录下。<br><img src="/2018/11/23/OpenCV4源码编译与使用/../../../../img/opencv/linux-make3.png" alt="make install安装"></li>
<li><p>用VS2017创建CMake项目，并配置顶层CMakeLists.txt</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"># CMakeList.txt: 顶层 CMake 项目文件，在此处执行全局配置</span><br><span class="line"># 并包含子项目。</span><br><span class="line">#</span><br><span class="line">cmake_minimum_required (VERSION <span class="number">3.8</span>)</span><br><span class="line"></span><br><span class="line">project (<span class="string">"OpenCVProject"</span>)</span><br><span class="line"></span><br><span class="line">IF (CMAKE_SYSTEM_NAME MATCHES <span class="string">"Linux"</span>)</span><br><span class="line">    MESSAGE(STATUS <span class="string">"Current Platform: Linux"</span>)</span><br><span class="line">    <span class="built_in">set</span>(SYSTEM_FLAG <span class="string">"linux64"</span>)</span><br><span class="line">    <span class="built_in">set</span>(OPENCV_INCLUDE_PATH <span class="string">"/usr/local/include/opencv4"</span>)</span><br><span class="line">    <span class="built_in">set</span>(OPENCV_LIB_PATH <span class="string">"/usr/local/lib"</span>)</span><br><span class="line">ELSEIF (CMAKE_SYSTEM_NAME MATCHES <span class="string">"Windows"</span>)</span><br><span class="line">    MESSAGE(STATUS <span class="string">"Current Platform: Windows"</span>)</span><br><span class="line">    <span class="built_in">set</span>(SYSTEM_FLAG <span class="string">"win64"</span>)</span><br><span class="line">    <span class="built_in">set</span>(OPENCV_INCLUDE_PATH <span class="string">"D:/BeawanDevelop/VSworkspace/OpenCV/build-contrib/install/include"</span>)</span><br><span class="line">    <span class="built_in">set</span>(OPENCV_LIB_PATH <span class="string">"D:/BeawanDevelop/VSworkspace/OpenCV/build-contrib/install/x64/vc15/staticlib"</span>)</span><br><span class="line">    <span class="built_in">set</span>(OPENCV_LIB_VERSION_SUFFIX <span class="string">"401"</span>)</span><br><span class="line">    IF (CMAKE_BUILD_TYPE MATCHES <span class="string">"Debug"</span>)</span><br><span class="line">        <span class="built_in">set</span>(OPENCV_LIB_BUILD_SUFFIX <span class="string">"d"</span>)</span><br><span class="line">    ELSE ()</span><br><span class="line">        <span class="built_in">set</span>(OPENCV_LIB_BUILD_SUFFIX <span class="string">""</span>)</span><br><span class="line">    ENDIF ()</span><br><span class="line">    <span class="built_in">set</span>(OPENCV_LIB_SUFFIX $&#123;OPENCV_LIB_VERSION_SUFFIX&#125;$&#123;OPENCV_LIB_BUILD_SUFFIX&#125;)</span><br><span class="line">ELSE ()</span><br><span class="line">    MESSAGE(STATUS <span class="string">"Other Platform: $&#123;CMAKE_SYSTEM_NAME&#125;"</span>)</span><br><span class="line">    <span class="built_in">set</span>(SYSTEM_FLAG <span class="string">"other"</span>)</span><br><span class="line">    <span class="built_in">set</span>(OPENCV_INCLUDE_PATH <span class="string">""</span>)</span><br><span class="line">    <span class="built_in">set</span>(OPENCV_LIB_PATH <span class="string">""</span>)</span><br><span class="line">ENDIF ()</span><br><span class="line"></span><br><span class="line">MESSAGE(STATUS $&#123;OPENCV_LIB_SUFFIX&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span>(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_DEBUG $&#123;PROJECT_SOURCE_DIR&#125;/../$&#123;SYSTEM_FLAG&#125;/Debug/lib)    </span><br><span class="line"><span class="built_in">set</span>(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_RELEASE $&#123;PROJECT_SOURCE_DIR&#125;/../$&#123;SYSTEM_FLAG&#125;/Release/lib)</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span>(CMAKE_LIBRARY_OUTPUT_DIRECTORY_DEBUG $&#123;CMAKE_BINARY_DIR&#125;/../$&#123;SYSTEM_FLAG&#125;/Debug/lib)</span><br><span class="line"><span class="built_in">set</span>(CMAKE_LIBRARY_OUTPUT_DIRECTORY_RELEASE $&#123;CMAKE_BINARY_DIR&#125;/../$&#123;SYSTEM_FLAG&#125;/Release/lib)</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span>(CMAKE_RUNTIME_OUTPUT_DIRECTORY_DEBUG $&#123;PROJECT_SOURCE_DIR&#125;/../$&#123;SYSTEM_FLAG&#125;/Debug/bin)   </span><br><span class="line"><span class="built_in">set</span>(CMAKE_RUNTIME_OUTPUT_DIRECTORY_RELEASE $&#123;PROJECT_SOURCE_DIR&#125;/../$&#123;SYSTEM_FLAG&#125;/Release/bin)</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> (REPLACE <span class="string">"/MD"</span> <span class="string">"/MT"</span> CMAKE_CXX_FLAGS_DEBUG $&#123;CMAKE_CXX_FLAGS_DEBUG&#125;)</span><br><span class="line"><span class="built_in">string</span> (REPLACE <span class="string">"/MD"</span> <span class="string">"/MT"</span> CMAKE_CXX_FLAGS_RELEASE $&#123;CMAKE_CXX_FLAGS_RELEASE&#125;)</span><br><span class="line"></span><br><span class="line"># 包含子项目。</span><br><span class="line">add_subdirectory (<span class="string">"CreditRecognize"</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置子目录的CMakeLists.txt，项目可在Windows和Linux上编译运行。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"># CMakeList.txt: CreditRecognize 的 CMake 项目，在此处包括源代码并定义</span><br><span class="line"># 项目特定的逻辑。</span><br><span class="line">#</span><br><span class="line">cmake_minimum_required (VERSION <span class="number">3.8</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> (CREDIT_RECOGNIZE_VERSION <span class="number">1.0</span>)</span><br><span class="line"></span><br><span class="line">#添加头文件目录</span><br><span class="line">include_directories (</span><br><span class="line">    $&#123;OPENCV_INCLUDE_PATH&#125;</span><br><span class="line">    $&#123;CMAKE_CURRENT_SOURCE_DIR&#125;/include</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">#查找指定目录下的所有源文件，然后将结果存进指定变量名</span><br><span class="line">aux_source_directory($&#123;CMAKE_CURRENT_SOURCE_DIR&#125;/src SOURCE_FILES)</span><br><span class="line"></span><br><span class="line">#添加需要链接的库文件目录，而LINK_LIBRARIES需要库文件路径</span><br><span class="line">IF (CMAKE_SYSTEM_NAME MATCHES <span class="string">"Linux"</span>)</span><br><span class="line">    find_package (OpenCV REQUIRED)</span><br><span class="line">ELSEIF (CMAKE_SYSTEM_NAME MATCHES <span class="string">"Windows"</span>)</span><br><span class="line">    link_directories ($&#123;OPENCV_LIB_PATH&#125;)</span><br><span class="line">ELSE ()</span><br><span class="line">ENDIF ()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#编译可执行程序，将源代码添加到此项目的可执行文件，也可以通过add_library编译动态库或静态库</span><br><span class="line">add_executable (CreditRecognize $&#123;SOURCE_FILES&#125;)</span><br><span class="line"></span><br><span class="line">IF (CMAKE_SYSTEM_NAME MATCHES <span class="string">"Linux"</span>)</span><br><span class="line">    target_link_libraries (CreditRecognize $&#123;OpenCV_LIBS&#125;)</span><br><span class="line">ELSEIF (CMAKE_SYSTEM_NAME MATCHES <span class="string">"Windows"</span>)</span><br><span class="line">    target_link_libraries (CreditRecognize IlmImf$&#123;OPENCV_LIB_BUILD_SUFFIX&#125; ippicvmt ippiw</span><br><span class="line">    ittnotify$&#123;OPENCV_LIB_BUILD_SUFFIX&#125; libjasper$&#123;OPENCV_LIB_BUILD_SUFFIX&#125; libjpeg-turbo$&#123;OPENCV_LIB_BUILD_SUFFIX&#125;</span><br><span class="line">    libpng$&#123;OPENCV_LIB_BUILD_SUFFIX&#125; libprotobuf$&#123;OPENCV_LIB_BUILD_SUFFIX&#125; libtiff$&#123;OPENCV_LIB_BUILD_SUFFIX&#125;</span><br><span class="line">    libwebp$&#123;OPENCV_LIB_BUILD_SUFFIX&#125; quirc$&#123;OPENCV_LIB_BUILD_SUFFIX&#125; zlib$&#123;OPENCV_LIB_BUILD_SUFFIX&#125;</span><br><span class="line">    opencv_aruco$&#123;OPENCV_LIB_SUFFIX&#125; opencv_bgsegm$&#123;OPENCV_LIB_SUFFIX&#125; opencv_bioinspired$&#123;OPENCV_LIB_SUFFIX&#125;</span><br><span class="line">    opencv_calib3d$&#123;OPENCV_LIB_SUFFIX&#125; opencv_ccalib$&#123;OPENCV_LIB_SUFFIX&#125; opencv_core$&#123;OPENCV_LIB_SUFFIX&#125;</span><br><span class="line">    opencv_datasets$&#123;OPENCV_LIB_SUFFIX&#125; opencv_dnn$&#123;OPENCV_LIB_SUFFIX&#125; opencv_dnn_objdetect$&#123;OPENCV_LIB_SUFFIX&#125;</span><br><span class="line">    opencv_dpm$&#123;OPENCV_LIB_SUFFIX&#125; opencv_face$&#123;OPENCV_LIB_SUFFIX&#125; opencv_features2d$&#123;OPENCV_LIB_SUFFIX&#125;</span><br><span class="line">    opencv_flann$&#123;OPENCV_LIB_SUFFIX&#125; opencv_fuzzy$&#123;OPENCV_LIB_SUFFIX&#125; opencv_gapi$&#123;OPENCV_LIB_SUFFIX&#125;</span><br><span class="line">    opencv_hfs$&#123;OPENCV_LIB_SUFFIX&#125; opencv_highgui$&#123;OPENCV_LIB_SUFFIX&#125; opencv_img_hash$&#123;OPENCV_LIB_SUFFIX&#125;</span><br><span class="line">    opencv_imgcodecs$&#123;OPENCV_LIB_SUFFIX&#125; opencv_imgproc$&#123;OPENCV_LIB_SUFFIX&#125; opencv_line_descriptor$&#123;OPENCV_LIB_SUFFIX&#125;</span><br><span class="line">    opencv_ml$&#123;OPENCV_LIB_SUFFIX&#125; opencv_objdetect$&#123;OPENCV_LIB_SUFFIX&#125; opencv_optflow$&#123;OPENCV_LIB_SUFFIX&#125;</span><br><span class="line">    opencv_phase_unwrapping$&#123;OPENCV_LIB_SUFFIX&#125; opencv_photo$&#123;OPENCV_LIB_SUFFIX&#125; opencv_plot$&#123;OPENCV_LIB_SUFFIX&#125;</span><br><span class="line">    opencv_reg$&#123;OPENCV_LIB_SUFFIX&#125; opencv_rgbd$&#123;OPENCV_LIB_SUFFIX&#125; opencv_saliency$&#123;OPENCV_LIB_SUFFIX&#125;</span><br><span class="line">    opencv_shape$&#123;OPENCV_LIB_SUFFIX&#125; opencv_stereo$&#123;OPENCV_LIB_SUFFIX&#125; opencv_stitching$&#123;OPENCV_LIB_SUFFIX&#125;</span><br><span class="line">    opencv_structured_light$&#123;OPENCV_LIB_SUFFIX&#125; opencv_superres$&#123;OPENCV_LIB_SUFFIX&#125; opencv_surface_matching$&#123;OPENCV_LIB_SUFFIX&#125;</span><br><span class="line">    opencv_text$&#123;OPENCV_LIB_SUFFIX&#125; opencv_tracking$&#123;OPENCV_LIB_SUFFIX&#125; opencv_video$&#123;OPENCV_LIB_SUFFIX&#125;</span><br><span class="line">    opencv_videoio$&#123;OPENCV_LIB_SUFFIX&#125; opencv_videostab$&#123;OPENCV_LIB_SUFFIX&#125; opencv_xfeatures2d$&#123;OPENCV_LIB_SUFFIX&#125;</span><br><span class="line">    opencv_ximgproc$&#123;OPENCV_LIB_SUFFIX&#125; opencv_xobjdetect$&#123;OPENCV_LIB_SUFFIX&#125; opencv_xphoto$&#123;OPENCV_LIB_SUFFIX&#125;)</span><br><span class="line">ELSE ()</span><br><span class="line">ENDIF ()</span><br><span class="line"></span><br><span class="line"># TODO: 如有需要，请添加测试并安装目标。</span><br></pre></td></tr></table></figure>
</li>
</ol>
<hr>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">comlc</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://comlc.github.io/2018/11/23/OpenCV4源码编译与使用/">https://comlc.github.io/2018/11/23/OpenCV4源码编译与使用/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://comlc.github.io" target="_blank">COMLCのBlog</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/OpenCV/">OpenCV</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2018/11/24/Tesseract-OCR4源码编译与使用/"><i class="fa fa-chevron-left">  </i><span>Tesseract-OCR4源码编译与使用</span></a></div><div class="next-post pull-right"><a href="/2018/11/20/VS2017开发跨平台C++项目/"><span>VS2017开发跨平台C++项目</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'https://comlc.github.io/2018/11/23/OpenCV4源码编译与使用/';
  this.page.identifier = '2018/11/23/OpenCV4源码编译与使用/';
  this.page.title = 'OpenCV4源码编译与使用';
}
var d = document, s = d.createElement('script');
s.src = "https://" + 'fridolph' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script><script id="dsq-count-src" src="https://fridolph.disqus.com/count.js" async></script></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2020 By comlc</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.5.3"></script><script src="/js/fancybox.js?version=1.5.3"></script><script src="/js/sidebar.js?version=1.5.3"></script><script src="/js/copy.js?version=1.5.3"></script><script src="/js/fireworks.js?version=1.5.3"></script><script src="/js/transition.js?version=1.5.3"></script><script src="/js/scroll.js?version=1.5.3"></script><script src="/js/head.js?version=1.5.3"></script></body></html>